<% if @discussion_date %>
	<% if @discussion_date > Time.now.beginning_of_day %>
		<% @discussion_date = time_ago_in_words(@discussion_date) + " ago" %>
	<% else %>
    	<%= @discussion_date = @discussion_date.strftime("%b %d, %Y") %>
	<% end %>
<% end %>

<% if @discussion.user.profile_pic? %>
  <% @userimage = asset_path(@discussion.user.profile_pic.url(:thumb)) %>
<% else %>
  <% @userimage = asset_path('default.png') %>
<% end %>

<% if current_user %>
  <% @favorite_discussions = current_user.favorite_discussions.pluck(:id) %>
<% end %>

<%= react_component "DiscussionPage", { discussion: @discussion, discussions: @discussions, currentUser: current_user, favoriteDiscussions: @favorite_discussions, tags: @tag_list, showFavorites: params[:fav], discussionUserName: @discussion_username, discussionUserImage: @userimage, responses: @responses, upvotes: @upvotes, tagFilter: params[:filter]} %>
