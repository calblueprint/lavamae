<div class="discussion-selected-container">
  <div class="row">
    <% if current_user and current_user == discussion.user %>
      <%= react_component "DiscussionForm", { discussion: @discussion } %>
    <% else %>
        <h2 class="discussion-title"><%= @discussion.title %></h2>
        <p class="discussion-description wordwrap"><%= @discussion.content %></p>
    <% end %>
  </div>

  <div class="user-action row">
    <div class="action-container pull-left">
      <i class="upvote-button fa fa-angle-up fa-lg"></i>
      <span class="upvote-count"><%= @discussion.score %> Upvotes</span>
    </div>
    <div class="user-container pull-right">
      <div class="name-date">
        <a href=""><div class="user-name"><%= @discussion.user.full_name %></div></a>
        <div class="date"><%= time_ago_in_words(@discussion.created_at) %> ago</div>
      </div>
      <div class="user-picture">
        <a href=""><%= image_tag("grace.jpg") %></a>
      </div>
    </div>
  </div>

  <hr class="row" />

  <div class="response-form-container row">
    <% if current_user %>
      <h5 class="response-form-header">Post a Response</h5>
      <%= render 'responses/form' %>
    <% else %>
      <h4 class="response-form-header">Want to add a Discussion or Response?</h4>
      <%= react_component('LoginModal', style: "btn btn-transparent btn-forum-login") %>
    <% end %>
  </div>

  <% if @discussion.responses.count > 0 %>
    <h5 class="responses-title">Responses</h5>
  <% end %>

  <% @responses.each do |r| %>
    <%= render r %>
    <% if !r.equal?(@responses.last) %>
        <br>
    <% end %>
  <% end %>
</div>
