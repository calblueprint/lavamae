<section class="profile">
  <div class="container profile-container">
    <div class="user-card user-flex">
      <div class="profile-picture">
        <% if @user.profile_pic? %>
          <%= image_tag @user.profile_pic.url(:thumb) %>
        <% else %>
          <%= image_tag("default.png") %>
        <% end %>
      </div>
      <div class="user-info user-flex">
        <div class="user-profile-fields">
          Name<br>
          Email<br>
          Organization<br>
          Website<br>
          Location<br>
        </div>
        <div class="vertical-line">
          <div class="user-profile-answers">
            <div>
              <%= @user.first_name %>
              <%= @user.last_name %>
            </div>
            <%= @user.email %><br>
            <% if @user.organization %>
              <%= @user.organization %><br>
            <% else %>
              <%= "Not Available" %><br>
            <% end %>
            <% if @user.website %>
              <%= @user.website %><br>
            <% else %>
              <%= "Not Available" %><br>
            <% end %>
            <% if @location %>
              <%= @location.place %><br>
            <% else %>
              <%= "Not Available" %><br>
            <% end %>
          </div>
        </div>
      </div>
      <%if current_user && current_user.id == @user.id %>
        <div class="user-flex">
          <div class="profile-edit-button">
            <%if @location %>
              <%= react_component('EditProfileModal', user_id: @user.id, first_name: @user.first_name, last_name: @user.last_name, email: @user.email, organization: @user.organization, website: @user.website, location: @location.place, on_map: @user.on_map, profile_pic: @user.profile_pic) %>
            <% else %>
              <%= react_component('EditProfileModal', user_id: @user.id, first_name: @user.first_name, last_name: @user.last_name, email: @user.email, organization: @user.organization, website: @user.website, on_map: @user.on_map, profile_pic: @user.profile_pic) %>
            <% end %>
          </div>
          <div>
            <%= react_component('ChangePasswordModal', user_id: @user.id) %>
          </div>
        </div>
      <% end %>
    </div>
    <div class="profile-right">
      <%if current_user && current_user.id == @user.id && @user.is_admin %>
      <div>
        <h5 class="profile-section-titles">
          <%= "Users Pending Map Approval" %><br>
        </h5>
        <%= react_component('PendingMapUsers', pending_users: @pending_map_users, user_id: @user.id) %>
      </div>
      <% end %>
      <% if @favorite_discussions.count > 0 %>
      <div>
        <h5 class="profile-section-titles">
          <%= "Favorited Discussions" %><br>
        </h5>
        <div class="favorite-discussions-container col-xs-12 col-md-4" id="discussions">
          <% @favorite_discussions.each do |discussion| %>
            <%= render 'discussions/shortened', {discussion: discussion} %>
          <% end %>
        </div>
      </div>
      <div class="user-profile-answers">
        <%= "Bio" %><br>
        <%= react_component('UserBio', user: @user) %>
      </div>
      <div class="user-profile-answers">
        <%= "Photo Gallery" %><br>
        <%= react_component('UserPhotoUpload', user: @user, images: @user.images) %>
        <%= react_component('UserPhotoGallery', user: @user, images: @user.images) %>
      </div>
    </div>
  </div>
</section>
